<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Toolingo – Alquiler de equipos y herramientas</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: {
              50:'#fff7ed',100:'#ffedd5',200:'#fed7aa',300:'#fdba74',
              400:'#fb923c',500:'#f97316',600:'#ea580c',700:'#c2410c'
            }
          },
          boxShadow: { soft: '0 8px 24px rgba(15,23,42,.06)' }
        }
      }
    }
  </script>
</head>
<body class="text-slate-800 bg-white">

  <!-- Navbar -->
  <header class="sticky top-0 bg-white/80 backdrop-blur border-b border-slate-200 z-50">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="/" class="flex items-center gap-2">
        <svg width="28" height="28" viewBox="0 0 24 24" class="text-brand-600 fill-current transition-transform duration-300 hover:rotate-12">
          <path d="M21 7.5a5.5 5.5 0 0 1-7.53 5.09l-6.44 6.44a1.5 1.5 0 0 1-2.12-2.12l6.44-6.44A5.5 5.5 0 1 1 21 7.5Z"/>
        </svg>
        <span class="text-xl font-extrabold">Toolingo</span>
      </a>

      <nav class="hidden md:flex gap-6 text-sm">
        <a href="#como" class="relative transition hover:text-brand-600 after:absolute after:left-0 after:-bottom-1 after:w-0 after:h-0.5 after:bg-brand-600 after:transition-all after:duration-300 hover:after:w-full">Cómo funciona</a>
        <a href="#servicios" class="relative transition hover:text-brand-600 after:absolute after:left-0 after:-bottom-1 after:w-0 after:h-0.5 after:bg-brand-600 after:transition-all after:duration-300 hover:after:w-full">Servicios</a>
        <a href="#destacados" class="relative transition hover:text-brand-600 after:absolute after:left-0 after:-bottom-1 after:w-0 after:h-0.5 after:bg-brand-600 after:transition-all after:duration-300 hover:after:w-full">Destacados</a>
        <a href="/catalogo/" class="relative font-semibold transition hover:text-brand-600 after:absolute after:left-0 after:-bottom-1 after:w-0 after:h-0.5 after:bg-brand-600 after:transition-all after:duration-300 hover:after:w-full">Productos</a>
      </nav>

      <div class="flex gap-3">
        <a href="/admin/" class="px-3 py-1.5 rounded-lg border transition hover:bg-slate-50 hover:-translate-y-0.5">Admin</a>
        <a href="/api/docs/" class="px-3 py-1.5 rounded-lg bg-brand-600 text-white transition hover:bg-brand-700 hover:-translate-y-0.5">API</a>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="bg-gradient-to-b from-brand-50 to-white">
    <div class="max-w-6xl mx-auto px-4 py-16 grid md:grid-cols-2 gap-10 items-center">
      <div>
        <h1 class="text-4xl md:text-5xl font-extrabold leading-tight">
          Toolingo es el <span class="text-brand-600">marketplace</span> para
          alquilar equipos y herramientas cerca de ti.
        </h1>
        <p class="mt-4 text-slate-600 text-lg">
          Publica tus herramientas como propietario o encuentra la indicada para tu proyecto como arrendatario.
          Seguro, rápido y con calificaciones verificadas.
        </p>
        <div class="mt-6 flex gap-3">
          <a href="#servicios" class="px-5 py-3 rounded-xl bg-brand-600 text-white transition transform hover:bg-brand-700 hover:-translate-y-1">Explorar servicios</a>
          <a href="/api/docs/" class="px-5 py-3 rounded-xl border border-slate-300 transition transform hover:bg-slate-50 hover:-translate-y-1">Ver API</a>
        </div>
        <div class="mt-6 text-sm text-slate-500">+ Disponibilidad por días • + Depósito opcional • + Pagos seguros</div>
      </div>

      <!-- Tarjeta búsqueda (mock) -->
      <div class="bg-white rounded-2xl shadow-soft p-6 border border-slate-100 transition hover:shadow-lg">
        <div class="text-sm mb-2 text-slate-500">Búsqueda rápida (demo)</div>
        <div class="flex gap-2">
          <input class="w-full border rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-brand-200 transition" placeholder="¿Qué herramienta necesitas?" />
          <button class="px-4 rounded-xl bg-brand-600 text-white transition hover:bg-brand-700 hover:-translate-y-0.5">Buscar</button>
        </div>
        <p class="mt-3 text-xs text-slate-500">Pronto conectaremos esto con <code>/api/articulos/</code>.</p>
      </div>
    </div>
  </section>

  <!-- Cómo funciona -->
  <section id="como" class="py-16">
    <div class="max-w-6xl mx-auto px-4">
      <h2 class="text-2xl font-bold">¿Cómo funciona Toolingo?</h2>
      <div class="grid md:grid-cols-3 gap-6 mt-6">
        <div class="p-6 rounded-2xl border bg-white shadow-soft transition transform hover:-translate-y-1 hover:shadow-lg">
          <h3 class="font-semibold">1. Explora</h3>
          <p class="text-slate-600 mt-2">Filtra por categoría, ubicación y precio por día.</p>
        </div>
        <div class="p-6 rounded-2xl border bg-white shadow-soft transition transform hover:-translate-y-1 hover:shadow-lg">
          <h3 class="font-semibold">2. Reserva</h3>
          <p class="text-slate-600 mt-2">Elige fechas disponibles y realiza el pago seguro.</p>
        </div>
        <div class="p-6 rounded-2xl border bg-white shadow-soft transition transform hover:-translate-y-1 hover:shadow-lg">
          <h3 class="font-semibold">3. Califica</h3>
          <p class="text-slate-600 mt-2">Entrega/recibe el equipo y deja tu calificación.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Servicios -->
  <section id="servicios" class="py-16 bg-slate-50 border-y">
    <div class="max-w-6xl mx-auto px-4">
      <h2 class="text-2xl font-bold">Servicios principales</h2>
      <p class="text-slate-600 mt-1">Alquila por día herramientas para construcción, jardinería y más.</p>

      <div class="grid sm:grid-cols-2 md:grid-cols-3 gap-6 mt-6">
        <div class="p-6 rounded-2xl bg-white border shadow-soft transition transform hover:-translate-y-1 hover:shadow-lg">
          <div class="text-sm text-brand-700 font-semibold">Construcción</div>
          <div class="mt-2 text-slate-700">Demoledores, mezcladoras, compactadoras</div>
        </div>
        <div class="p-6 rounded-2xl bg-white border shadow-soft transition transform hover:-translate-y-1 hover:shadow-lg">
          <div class="text-sm text-brand-700 font-semibold">Eléctricas</div>
          <div class="mt-2 text-slate-700">Taladros, esmeriles, sierras</div>
        </div>
        <div class="p-6 rounded-2xl bg-white border shadow-soft transition transform hover:-translate-y-1 hover:shadow-lg">
          <div class="text-sm text-brand-700 font-semibold">Alturas</div>
          <div class="mt-2 text-slate-700">Andamios, escaleras</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Destacados -->
  <section id="destacados" class="py-16">
    <div class="max-w-6xl mx-auto px-4">
      <div class="flex items-end justify-between">
        <h2 class="text-2xl md:text-3xl font-bold">Artículos destacados</h2>
        <a href="/catalogo/" class="text-sm text-brand-700 hover:underline">Ver todo</a>
      </div>

      <!-- Grid -->
      <div id="gridDest" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-6"></div>

      <!-- Skeletons (se reemplazan al cargar) -->
      <template id="card-skeleton">
        <article class="rounded-2xl border bg-white shadow-soft p-4 animate-pulse">
          <div class="h-44 rounded-xl bg-slate-100 mb-4"></div>
          <div class="h-4 w-2/3 bg-slate-100 rounded mb-2"></div>
          <div class="h-3 w-1/3 bg-slate-100 rounded"></div>
        </article>
      </template>
    </div>
  </section>

  <!-- CTA -->
  <!-- CTA -->
<section class="py-16 bg-brand-600 text-white">
  <div class="max-w-6xl mx-auto px-4 text-center">
    <h2 class="text-3xl font-bold">¿Listo para publicar o alquilar?</h2>
    <p class="mt-2 text-brand-100">Crea tu cuenta y empieza a generar ingresos con tus herramientas.</p>
    <div class="mt-6">
      <a href="/login/?next=/publicar/" 
         class="px-6 py-3 bg-white text-brand-700 rounded-xl font-semibold transition transform hover:bg-slate-100 hover:-translate-y-1">
        Inicia sesión
      </a>
    </div>
  </div>
</section>


  <!-- JS destacados -->
  <script>
    const fmtCOP = n => Number(n||0).toLocaleString('es-CO');

    function cardArticulo(a){
      const imgUrl = a.portada || (a.imagenes && a.imagenes[0]?.url) || null;
      return `
        <article class="group rounded-2xl border bg-white shadow-soft overflow-hidden transition hover:-translate-y-1 hover:shadow-lg">
          <div class="relative">
            ${imgUrl
              ? `<img src="${imgUrl}" alt="${a.titulo}" class="w-full h-44 object-cover">`
              : `<div class="w-full h-44 bg-brand-100"></div>`
            }
            <div class="absolute inset-x-0 bottom-0 h-16 bg-gradient-to-t from-black/30 to-transparent pointer-events-none"></div>
            <span class="absolute top-3 right-3 px-2 py-1 rounded-md text-xs font-semibold bg-white/90 text-brand-700 shadow">
              $${fmtCOP(a.precio_por_dia)}/día
            </span>
          </div>
          <div class="p-4">
            <h3 class="font-semibold line-clamp-1 group-hover:text-brand-700 transition">${a.titulo}</h3>
            <div class="mt-1 text-xs text-slate-500 flex items-center gap-2">
              ${a.ubicacion ? `<span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-slate-100">${a.ubicacion}</span>` : ''}
            </div>
            <div class="mt-3">
              <a class="text-sm text-brand-700 hover:underline" href="/api/articulos/${a.id}/">Ver detalle (API)</a>
            </div>
          </div>
        </article>
      `;
    }

    async function loadDestacados(){
      const grid = document.getElementById('gridDest');
      // skeletons
      grid.innerHTML = '';
      for(let i=0;i<6;i++){
        grid.append(document.getElementById('card-skeleton').content.cloneNode(true));
      }

      try{
        const r = await fetch('/api/articulos/?ordering=-creado');
        let items = await r.json();
        items = items.slice(0,6);

        if(!Array.isArray(items) || items.length === 0){
          grid.innerHTML = `
            <div class="col-span-full text-center text-slate-500 border rounded-2xl py-10">
              Aún no hay artículos publicados. <a class="text-brand-700 hover:underline" href="/publicar/">¡Publica el primero!</a>
            </div>`;
          return;
        }

        grid.innerHTML = items.map(cardArticulo).join('');
      }catch(e){
        grid.innerHTML = `<div class="col-span-full text-center text-red-600">No se pudieron cargar los artículos.</div>`;
      }
    }

    loadDestacados();
  </script>
</body>
</html>
